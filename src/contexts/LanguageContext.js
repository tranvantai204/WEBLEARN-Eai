import React, { createContext, useState, useContext, useCallback, useMemo, useEffect } from 'react';

const LanguageContext = createContext();

export const LanguageProvider = ({ children }) => {
    // Get stored language from localStorage or default to English
    const initialLanguage = localStorage.getItem('selectedLanguage') || 'en';
    const [currentLanguage, setCurrentLanguage] = useState(initialLanguage);
    
    // All available languages - only English and Vietnamese
    const languages = useMemo(() => [
        { code: 'en', name: 'English' },
        { code: 'vi', name: 'Vietnamese' }
    ], []);

    // Static translations for common UI elements
    const staticTranslations = useMemo(() => ({
        en: {
            'Flashcards': 'Flashcards',
            'Readings': 'Readings',
            'Writing': 'Writing',
            'Discover': 'Discover',
            'Sign In': 'Sign In',
            'Get Started': 'Get Started',
            'Select Language': 'Select Language',
            'Home': 'Home',
            'Your Flashcards': 'Your Flashcards',
            'Explore Flashcards': 'Explore Flashcards',
            'Your Readings': 'Your Readings',
            'Explore Tests': 'Explore Tests',
            'Your Writing': 'Your Writing',
            'Explore Writing': 'Explore Writing',
            'Writing Exercises': 'Writing Exercises',
            'Progress': 'Progress',
            'Logout': 'Logout',
            'Explore': 'Explore',
            'Multiple Choice Tests': 'Multiple Choice Tests',
            'Enter API Key': 'Enter API Key',
            'Learning Language': 'Learning Language',
            'Native Language': 'Native Language',
            'My Flashcards': 'My Flashcards',
            'Create Manual Set': 'Create Manual Set',
            'Create AI Set': 'Create AI Set',
            'Study Without an Account': 'Study Without an Account',
            'All flashcard sets shown here are public and can be studied without signing in, but your learning time, progress and streaks will not be saved.': 'All flashcard sets shown here are public and can be studied without signing in, but your learning time, progress and streaks will not be saved.',
            'Loading...': 'Loading...',
            'Cards': 'Cards',
            'Level': 'Level',
            'Learners': 'Learners',
            'Items Per Page': 'Items Per Page',
            'You haven\'t created any flashcard sets yet.': 'You haven\'t created any flashcard sets yet.',
            'Create New': 'Create New',
            'Edit': 'Edit',
            'Delete': 'Delete',
            'Study': 'Study',
            'Save': 'Save',
            'Cancel': 'Cancel',
            'Confirm': 'Confirm',
            'Search': 'Search',
            'No results found': 'No results found',
            'View': 'View',
            'Back': 'Back',
            'Next': 'Next',
            'Previous': 'Previous',
            'Submit': 'Submit',
            'Settings': 'Settings',
            'Profile': 'Profile',
            'Account': 'Account',
            'Help': 'Help',
            'Contact': 'Contact',
            'About': 'About',
            'Terms': 'Terms',
            'Privacy': 'Privacy',
            'Copyright': 'Copyright',
            'All rights reserved': 'All rights reserved',
            'Master Languages with': 'Master Languages with',
            'Smart Flashcards': 'Smart Flashcards',
            'Transform your language learning journey with AI-powered flashcards, personalized study plans, and interactive exercises. Start learning smarter, not harder.': 'Transform your language learning journey with AI-powered flashcards, personalized study plans, and interactive exercises. Start learning smarter, not harder.',
            'Start Free Trial': 'Start Free Trial',
            'Explore Features': 'Explore Features',
            'All Languages': 'All Languages',
            'English': 'English',
            'Vietnamese': 'Vietnamese',
            'Spanish': 'Spanish',
            'French': 'French',
            'German': 'German',
            'Japanese': 'Japanese',
            'Korean': 'Korean',
            'Chinese': 'Chinese',
            'Title is required': 'Title is required',
            'Description': 'Description',
            'Example': 'Example',
            'Word/Phrase': 'Word/Phrase',
            'Translation': 'Translation',
            'Add Card': 'Add Card',
            'Edit Card': 'Edit Card',
            'Delete Card': 'Delete Card',
            'Edit Set': 'Edit Set',
            'Delete Set': 'Delete Set',
            'Change Visibility': 'Change Visibility',
            'Generate with AI': 'Generate with AI',
            'Import Cards': 'Import Cards',
            'Share': 'Share',
            'Copy Link': 'Copy Link',
            'Link Copied!': 'Link Copied!',
            'Public': 'Public',
            'Private': 'Private',
            'Created': 'Created',
            'Updated': 'Updated',
            'Learning Progress': 'Learning Progress',
            'Current Streak': 'Current Streak',
            'Longest Streak': 'Longest Streak',
            'Total Learning Time': 'Total Learning Time',
            'Recent Session': 'Recent Session',
            'Learning Calendar': 'Learning Calendar',
            'Start Learning': 'Start Learning',
            'Study Now': 'Study Now',
            'days': 'days',
            'minutes': 'minutes',
            'hours': 'hours',
            'No data found': 'No data found',
            'You have no learning data yet. Start learning to track your progress!': 'You have no learning data yet. Start learning to track your progress!',
            'Your Achievements': 'Your Achievements',
            // Additional translations for flashcards
            'Fullscreen Study': 'Fullscreen Study',
            'End Session': 'End Session',
            'I don\'t know': 'I don\'t know',
            'I know this': 'I know this',
            'Mode': 'Mode',
            'Sequential': 'Sequential',
            'Shuffle': 'Shuffle',
            'Difficulty': 'Difficulty',
            'Title': 'Title',
            'Language': 'Language',
            'Front': 'Front',
            'Back': 'Back',
            'Term': 'Term',
            'Definition': 'Definition',
            'Read more': 'Read more',
            // Additional translations for writing
            'Generate AI Topic': 'Generate AI Topic',
            'Title for your exercise': 'Title for your exercise',
            'Generate Topic': 'Generate Topic',
            'Create Writing Exercise': 'Create Writing Exercise',
            'Write your prompt here': 'Write your prompt here',
            'Please select a different learning and native language': 'Please select a different learning and native language',
            'Please wait...': 'Please wait...',
            // Additional translations for progress
            'Learning Stats': 'Learning Stats',
            'Streak': 'Streak',
            'Your Learning Progress': 'Your Learning Progress',
            'Track your development': 'Track your development',
            'Loading data...': 'Loading data...',
            'New Reading': 'New Reading',
            'Study Flashcards': 'Study Flashcards',
            'New Writing': 'New Writing',
            'Read New': 'Read New',
            'Start learning now': 'Start learning now',
            // Additional translations for reading
            'Reading Exercises': 'Reading Exercises',
            'Multiple Choice': 'Multiple Choice',
            'Create AI Test': 'Create AI Test',
            'Create Test': 'Create Test',
            'Begin Test': 'Begin Test',
            // Additional for progress page
            'Keep your motivation every day!': 'Keep your motivation every day!',
            'Your record so far!': 'Your record so far!',
            'Time invested in your learning': 'Time invested in your learning',
            'Continue maintaining your learning habits!': 'Continue maintaining your learning habits!',
            'Note: Calendar only shows your most recent continuous learning streak.': 'Note: Calendar only shows your most recent continuous learning streak.',
            '3-Day Streak': '3-Day Streak',
            'Study every day for 3 consecutive days': 'Study every day for 3 consecutive days',
            '10 Minutes of Learning': '10 Minutes of Learning', 
            'Study for a total of 10 minutes': 'Study for a total of 10 minutes',
            '7-Day Streak': '7-Day Streak',
            'Study every day for 7 consecutive days': 'Study every day for 7 consecutive days',
            'Back to Set': 'Back to Set',
            'Click to reveal definition': 'Click to reveal definition',
            'Click to flip back': 'Click to flip back',
            'cards': 'cards',
            'Study Time': 'Study Time',
            'Known Cards': 'Known Cards',
            'Cards Viewed': 'Cards Viewed',
            'Accuracy': 'Accuracy',
            // Reading test UI elements
            'Generate Tests with AI': 'Generate Tests with AI',
            'Enter a topic (optional) or leave blank for AI to choose one.': 'Enter a topic (optional) or leave blank for AI to choose one.',
            'Select options below to customize your reading test.': 'Select options below to customize your reading test.',
            'AI will automatically generate a reading passage and multiple-choice questions.': 'AI will automatically generate a reading passage and multiple-choice questions.',
            'Example topics:': 'Example topics:',
            'Filter by Language:': 'Filter by Language:',
            'My Reading Tests': 'My Reading Tests',
            'My Multiple Choice Tests': 'My Multiple Choice Tests',
            'Create New Test': 'Create New Test',
            'All languages': 'All languages',
            'Difficulty Level:': 'Difficulty Level:',
            'Level 3 - Intermediate': 'Level 3 - Intermediate',
            'AI test generation requires a Google Gemini API key.': 'AI test generation requires a Google Gemini API key.',
            'If you don\'t have one yet, the system will guide you to add it.': 'If you don\'t have one yet, the system will guide you to add it.',
            'Create AI Reading Test': 'Create AI Reading Test',
            // Level labels
            'Level 1 - Beginner': 'Level 1 - Beginner',
            'Level 2 - Elementary': 'Level 2 - Elementary',
            'Level 3 - Intermediate': 'Level 3 - Intermediate',
            'Level 3 - Pre-Intermediate': 'Level 3 - Pre-Intermediate',
            'Level 4 - Intermediate': 'Level 4 - Intermediate',
            'Level 4 - Upper Intermediate': 'Level 4 - Upper Intermediate',
            'Level 5 - Advanced': 'Level 5 - Advanced',
            'Level 5 - Upper Intermediate': 'Level 5 - Upper Intermediate',
            'Level 6 - Advanced': 'Level 6 - Advanced',
            'Level 6 - Proficient': 'Level 6 - Proficient',
            'Táº¡o bÃ i kiá»ƒm tra báº±ng AI': 'Táº¡o bÃ i kiá»ƒm tra báº±ng AI', 
            'Enter a topic (optional) or leave blank for AI to choose one. Select options below to customize your reading test.': 'Nháº­p má»™t chá»§ Ä‘á» (tÃ¹y chá»n) hoáº·c Ä‘á»ƒ trá»‘ng Ä‘á»ƒ AI chá»n má»™t chá»§ Ä‘á». Chá»n cÃ¡c tÃ¹y chá»n bÃªn dÆ°á»›i Ä‘á»ƒ tÃ¹y chá»‰nh bÃ i kiá»ƒm tra Ä‘á»c cá»§a báº¡n.',
            'AI will automatically generate a reading passage and multiple-choice questions. Example topics: "Climate Change", "Space Exploration", "Vietnamese Culture"...': 'AI sáº½ tá»± Ä‘á»™ng táº¡o má»™t Ä‘oáº¡n vÄƒn Ä‘á»c vÃ  cÃ¡c cÃ¢u há»i tráº¯c nghiá»‡m. VÃ­ dá»¥ cÃ¡c chá»§ Ä‘á»: "Biáº¿n Ä‘á»•i KhÃ­ háº­u", "KhÃ¡m phÃ¡ KhÃ´ng gian", "VÄƒn hÃ³a Viá»‡t Nam"...'
        },
        vi: {
            'Flashcards': 'Tháº» ghi nhá»›',
            'Readings': 'BÃ i Ä‘á»c',
            'Writing': 'Viáº¿t',
            'Discover': 'KhÃ¡m phÃ¡',
            'Sign In': 'ÄÄƒng nháº­p',
            'Get Started': 'Báº¯t Ä‘áº§u ngay',
            'Select Language': 'Chá»n ngÃ´n ngá»¯',
            'Home': 'Trang chá»§',
            'Your Flashcards': 'Tháº» ghi nhá»› cá»§a báº¡n',
            'Explore Flashcards': 'KhÃ¡m phÃ¡ tháº» ghi nhá»›',
            'Your Readings': 'BÃ i Ä‘á»c cá»§a báº¡n',
            'Explore Tests': 'KhÃ¡m phÃ¡ bÃ i kiá»ƒm tra',
            'Your Writing': 'BÃ i viáº¿t cá»§a báº¡n',
            'Explore Writing': 'KhÃ¡m phÃ¡ bÃ i viáº¿t',
            'Writing Exercises': 'BÃ i táº­p viáº¿t',
            'Progress': 'Tiáº¿n Ä‘á»™',
            'Logout': 'ÄÄƒng xuáº¥t',
            'Explore': 'KhÃ¡m phÃ¡',
            'Multiple Choice Tests': 'BÃ i kiá»ƒm tra tráº¯c nghiá»‡m',
            'Enter API Key': 'Nháº­p khÃ³a API',
            'Learning Language': 'NgÃ´n ngá»¯ há»c',
            'Native Language': 'NgÃ´n ngá»¯ báº£n Ä‘á»‹a',
            'My Flashcards': 'Tháº» ghi nhá»› cá»§a tÃ´i',
            'Create Manual Set': 'Táº¡o bá»™ tháº» thá»§ cÃ´ng',
            'Create AI Set': 'Táº¡o bá»™ tháº» báº±ng AI',
            'Study Without an Account': 'Há»c mÃ  khÃ´ng cáº§n tÃ i khoáº£n',
            'All flashcard sets shown here are public and can be studied without signing in, but your learning time, progress and streaks will not be saved.': 'Táº¥t cáº£ cÃ¡c bá»™ tháº» ghi nhá»› hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y lÃ  cÃ´ng khai vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c há»c mÃ  khÃ´ng cáº§n Ä‘Äƒng nháº­p, nhÆ°ng thá»i gian há»c, tiáº¿n Ä‘á»™ vÃ  chuá»—i ngÃ y há»c cá»§a báº¡n sáº½ khÃ´ng Ä‘Æ°á»£c lÆ°u láº¡i.',
            'Loading...': 'Äang táº£i...',
            'Cards': 'Tháº»',
            'Level': 'Cáº¥p Ä‘á»™',
            'Learners': 'NgÆ°á»i há»c',
            'Items Per Page': 'Sá»‘ má»¥c trÃªn má»—i trang',
            'You haven\'t created any flashcard sets yet.': 'Báº¡n chÆ°a táº¡o bá»™ tháº» ghi nhá»› nÃ o.',
            'Create New': 'Táº¡o má»›i',
            'Edit': 'Chá»‰nh sá»­a',
            'Delete': 'XÃ³a',
            'Study': 'Há»c',
            'Save': 'LÆ°u',
            'Cancel': 'Há»§y',
            'Confirm': 'XÃ¡c nháº­n',
            'Search': 'TÃ¬m kiáº¿m',
            'No results found': 'KhÃ´ng tÃ¬m tháº¥y káº¿t quáº£',
            'View': 'Xem',
            'Back': 'Quay láº¡i',
            'Next': 'Tiáº¿p theo',
            'Previous': 'TrÆ°á»›c',
            'Submit': 'Gá»­i',
            'Settings': 'CÃ i Ä‘áº·t',
            'Profile': 'Há»“ sÆ¡',
            'Account': 'TÃ i khoáº£n',
            'Help': 'Trá»£ giÃºp',
            'Contact': 'LiÃªn há»‡',
            'About': 'Giá»›i thiá»‡u',
            'Terms': 'Äiá»u khoáº£n',
            'Privacy': 'Quyá»n riÃªng tÆ°',
            'Copyright': 'Báº£n quyá»n',
            'All rights reserved': 'Táº¥t cáº£ cÃ¡c quyá»n Ä‘Æ°á»£c báº£o lÆ°u',
            'Master Languages with': 'LÃ m chá»§ ngÃ´n ngá»¯ vá»›i',
            'Smart Flashcards': 'Tháº» ghi nhá»› thÃ´ng minh',
            'Transform your language learning journey with AI-powered flashcards, personalized study plans, and interactive exercises. Start learning smarter, not harder.': 'Biáº¿n Ä‘á»•i hÃ nh trÃ¬nh há»c ngÃ´n ngá»¯ cá»§a báº¡n vá»›i tháº» ghi nhá»› Ä‘Æ°á»£c há»— trá»£ bá»Ÿi AI, káº¿ hoáº¡ch há»c táº­p cÃ¡ nhÃ¢n hÃ³a vÃ  bÃ i táº­p tÆ°Æ¡ng tÃ¡c. Báº¯t Ä‘áº§u há»c thÃ´ng minh hÆ¡n, khÃ´ng pháº£i khÃ³ khÄƒn hÆ¡n.',
            'Start Free Trial': 'DÃ¹ng thá»­ miá»…n phÃ­',
            'Explore Features': 'KhÃ¡m phÃ¡ tÃ­nh nÄƒng',
            'All Languages': 'Táº¥t cáº£ ngÃ´n ngá»¯',
            'English': 'Tiáº¿ng Anh',
            'Vietnamese': 'Tiáº¿ng Viá»‡t',
            'Spanish': 'Tiáº¿ng TÃ¢y Ban Nha',
            'French': 'Tiáº¿ng PhÃ¡p',
            'German': 'Tiáº¿ng Äá»©c',
            'Japanese': 'Tiáº¿ng Nháº­t',
            'Korean': 'Tiáº¿ng HÃ n',
            'Chinese': 'Tiáº¿ng Trung',
            'Title is required': 'TiÃªu Ä‘á» lÃ  báº¯t buá»™c',
            'Description': 'MÃ´ táº£',
            'Example': 'VÃ­ dá»¥',
            'Word/Phrase': 'Tá»«/Cá»¥m tá»«',
            'Translation': 'Báº£n dá»‹ch',
            'Add Card': 'ThÃªm tháº»',
            'Edit Card': 'Chá»‰nh sá»­a tháº»',
            'Delete Card': 'XÃ³a tháº»',
            'Edit Set': 'Chá»‰nh sá»­a bá»™',
            'Delete Set': 'XÃ³a bá»™',
            'Change Visibility': 'Thay Ä‘á»•i cháº¿ Ä‘á»™ hiá»ƒn thá»‹',
            'Generate with AI': 'Táº¡o báº±ng AI',
            'Import Cards': 'Nháº­p tháº»',
            'Share': 'Chia sáº»',
            'Copy Link': 'Sao chÃ©p liÃªn káº¿t',
            'Link Copied!': 'ÄÃ£ sao chÃ©p liÃªn káº¿t!',
            'Public': 'CÃ´ng khai',
            'Private': 'RiÃªng tÆ°',
            'Created': 'ÄÃ£ táº¡o',
            'Updated': 'ÄÃ£ cáº­p nháº­t',
            'Learning Progress': 'Tiáº¿n Ä‘á»™ há»c táº­p',
            'Current Streak': 'Chuá»—i ngÃ y hiá»‡n táº¡i',
            'Longest Streak': 'Chuá»—i ngÃ y dÃ i nháº¥t',
            'Total Learning Time': 'Tá»•ng thá»i gian há»c',
            'Recent Session': 'Buá»•i há»c gáº§n Ä‘Ã¢y',
            'Learning Calendar': 'Lá»‹ch há»c táº­p',
            'Start Learning': 'Báº¯t Ä‘áº§u há»c',
            'Study Now': 'Há»c ngay',
            'Days': 'NgÃ y',
            'minutes': 'phÃºt',
            'hours': 'giá»',
            'No data found': 'KhÃ´ng tÃ¬m tháº¥y dá»¯ liá»‡u',
            'You have no learning data yet. Start learning to track your progress!': 'Báº¡n chÆ°a cÃ³ dá»¯ liá»‡u há»c táº­p. HÃ£y báº¯t Ä‘áº§u há»c Ä‘á»ƒ theo dÃµi tiáº¿n Ä‘á»™!',
            'Your Achievements': 'ThÃ nh tá»±u cá»§a báº¡n',
            // Additional translations for flashcards
            'Fullscreen Study': 'Há»c toÃ n mÃ n hÃ¬nh',
            'End Session': 'Káº¿t thÃºc phiÃªn',
            'I don\'t know': 'TÃ´i khÃ´ng biáº¿t',
            'I know this': 'TÃ´i biáº¿t Ä‘iá»u nÃ y',
            'Mode': 'Cháº¿ Ä‘á»™',
            'Sequential': 'Tuáº§n tá»±',
            'Shuffle': 'XÃ¡o trá»™n',
            'Difficulty': 'Äá»™ khÃ³',
            'Title': 'TiÃªu Ä‘á»',
            'Language': 'NgÃ´n ngá»¯',
            'Front': 'Máº·t trÆ°á»›c',
            'Back': 'Máº·t sau',
            'Term': 'Thuáº­t ngá»¯',
            'Definition': 'Äá»‹nh nghÄ©a',
            'Read more': 'Äá»c thÃªm',
            // Additional translations for writing
            'Generate AI Topic': 'Táº¡o chá»§ Ä‘á» AI',
            'Title for your exercise': 'TiÃªu Ä‘á» cho bÃ i táº­p cá»§a báº¡n',
            'Generate Topic': 'Táº¡o chá»§ Ä‘á»',
            'Create Writing Exercise': 'Táº¡o bÃ i táº­p viáº¿t',
            'Write your prompt here': 'Viáº¿t hÆ°á»›ng dáº«n cá»§a báº¡n táº¡i Ä‘Ã¢y',
            'Please select a different learning and native language': 'Vui lÃ²ng chá»n ngÃ´n ngá»¯ há»c vÃ  ngÃ´n ngá»¯ báº£n Ä‘á»‹a khÃ¡c nhau',
            'Please wait...': 'Vui lÃ²ng Ä‘á»£i...',
            // Additional translations for progress
            'Learning Stats': 'Thá»‘ng kÃª há»c táº­p',
            'Streak': 'Chuá»—i ngÃ y',
            'Your Learning Progress': 'Tiáº¿n Ä‘á»™ há»c táº­p cá»§a báº¡n',
            'Track your development': 'Theo dÃµi sá»± phÃ¡t triá»ƒn cá»§a báº¡n',
            'Loading data...': 'Äang táº£i dá»¯ liá»‡u...',
            'New Reading': 'Äá»c bÃ i má»›i',
            'Study Flashcards': 'Há»c tháº» ghi nhá»›',
            'New Writing': 'Viáº¿t bÃ i má»›i',
            'Read New': 'Äá»c má»›i',
            'Start learning now': 'Báº¯t Ä‘áº§u há»c ngay',
            // Additional translations for reading
            'Reading Exercises': 'BÃ i táº­p Ä‘á»c',
            'Multiple Choice': 'Tráº¯c nghiá»‡m',
            'Create AI Test': 'Táº¡o bÃ i kiá»ƒm tra AI',
            'Create Test': 'Táº¡o bÃ i kiá»ƒm tra',
            'Begin Test': 'Báº¯t Ä‘áº§u kiá»ƒm tra',
            // Additional for progress page
            'Keep your motivation every day!': 'Giá»¯ vá»¯ng Ä‘á»™ng lá»±c má»—i ngÃ y!',
            'Your record so far!': 'Ká»· lá»¥c cá»§a báº¡n cho Ä‘áº¿n nay!',
            'Time invested in your learning': 'Thá»i gian Ä‘áº§u tÆ° cho viá»‡c há»c cá»§a báº¡n',
            'Continue maintaining your learning habits!': 'Tiáº¿p tá»¥c duy trÃ¬ thÃ³i quen há»c táº­p!',
            'Note: Calendar only shows your most recent continuous learning streak.': 'LÆ°u Ã½: Lá»‹ch chá»‰ hiá»ƒn thá»‹ chuá»—i ngÃ y há»c liÃªn tá»¥c gáº§n nháº¥t.',
            '3-Day Streak': 'Há»c LiÃªn Tá»¥c 3 NgÃ y',
            'Study every day for 3 consecutive days': 'Há»c má»—i ngÃ y trong 3 ngÃ y liÃªn tiáº¿p',
            '10 Minutes of Learning': '10 PhÃºt Há»c Táº­p', 
            'Study for a total of 10 minutes': 'Há»c tá»•ng cá»™ng 10 phÃºt',
            '7-Day Streak': 'Há»c LiÃªn Tá»¥c 7 NgÃ y',
            'Study every day for 7 consecutive days': 'Há»c má»—i ngÃ y trong 7 ngÃ y liÃªn tiáº¿p',
            'Back to Set': 'Quay láº¡i bá»™ tháº»',
            'Click to reveal definition': 'Nháº¥p Ä‘á»ƒ hiá»‡n Ä‘á»‹nh nghÄ©a',
            'Click to flip back': 'Nháº¥p Ä‘á»ƒ láº­t láº¡i',
            'cards': 'tháº»',
            'Study Time': 'Thá»i gian há»c',
            'Known Cards': 'Tháº» Ä‘Ã£ biáº¿t',
            'Cards Viewed': 'Tháº» Ä‘Ã£ xem',
            'Accuracy': 'Äá»™ chÃ­nh xÃ¡c',
            // Reading test UI elements
            'Generate Tests with AI': 'Táº¡o bÃ i kiá»ƒm tra báº±ng AI',
            'Enter a topic (optional) or leave blank for AI to choose one.': 'Nháº­p má»™t chá»§ Ä‘á» (tÃ¹y chá»n) hoáº·c Ä‘á»ƒ trá»‘ng Ä‘á»ƒ AI chá»n má»™t chá»§ Ä‘á».',
            'Select options below to customize your reading test.': 'Chá»n cÃ¡c tÃ¹y chá»n bÃªn dÆ°á»›i Ä‘á»ƒ tÃ¹y chá»‰nh bÃ i kiá»ƒm tra Ä‘á»c cá»§a báº¡n.',
            'AI will automatically generate a reading passage and multiple-choice questions.': 'AI sáº½ tá»± Ä‘á»™ng táº¡o má»™t Ä‘oáº¡n vÄƒn Ä‘á»c vÃ  cÃ¡c cÃ¢u há»i tráº¯c nghiá»‡m.',
            'Example topics:': 'VÃ­ dá»¥ cÃ¡c chá»§ Ä‘á»:',
            'Filter by Language:': 'Lá»c theo ngÃ´n ngá»¯:',
            'My Reading Tests': 'BÃ i kiá»ƒm tra Ä‘á»c cá»§a tÃ´i',
            'My Multiple Choice Tests': 'BÃ i kiá»ƒm tra tráº¯c nghiá»‡m cá»§a tÃ´i',
            'Create New Test': 'Táº¡o bÃ i kiá»ƒm tra má»›i',
            'All languages': 'Táº¥t cáº£ ngÃ´n ngá»¯',
            'Difficulty Level:': 'Cáº¥p Ä‘á»™ khÃ³:',
            'Level 3 - Intermediate': 'Cáº¥p Ä‘á»™ 3 - Trung cáº¥p',
            'AI test generation requires a Google Gemini API key.': 'Táº¡o bÃ i kiá»ƒm tra báº±ng AI yÃªu cáº§u má»™t khÃ³a API Google Gemini.',
            'If you don\'t have one yet, the system will guide you to add it.': 'Náº¿u báº¡n chÆ°a cÃ³, há»‡ thá»‘ng sáº½ hÆ°á»›ng dáº«n báº¡n thÃªm vÃ o.',
            'Táº¡o bÃ i kiá»ƒm tra báº±ng AI': 'Táº¡o bÃ i kiá»ƒm tra báº±ng AI',
            // Level labels
            'Level 1 - Beginner': 'Cáº¥p Ä‘á»™ 1 - SÆ¡ cáº¥p',
            'Level 2 - Elementary': 'Cáº¥p Ä‘á»™ 2 - CÄƒn báº£n',
            'Level 3 - Intermediate': 'Cáº¥p Ä‘á»™ 3 - Trung cáº¥p',
            'Level 3 - Pre-Intermediate': 'Cáº¥p Ä‘á»™ 3 - Tiá»n trung cáº¥p',
            'Level 4 - Intermediate': 'Cáº¥p Ä‘á»™ 4 - Trung cáº¥p',
            'Level 4 - Upper Intermediate': 'Cáº¥p Ä‘á»™ 4 - Trung cáº¥p cao',
            'Level 5 - Advanced': 'Cáº¥p Ä‘á»™ 5 - Cao cáº¥p',
            'Level 5 - Upper Intermediate': 'Cáº¥p Ä‘á»™ 5 - Trung cáº¥p cao',
            'Level 6 - Advanced': 'Cáº¥p Ä‘á»™ 6 - Cao cáº¥p',
            'Level 6 - Proficient': 'Cáº¥p Ä‘á»™ 6 - ThÃ nh tháº¡o',
            'Táº¡o bÃ i kiá»ƒm tra báº±ng AI': 'Táº¡o bÃ i kiá»ƒm tra báº±ng AI', 
            'Enter a topic (optional) or leave blank for AI to choose one. Select options below to customize your reading test.': 'Nháº­p má»™t chá»§ Ä‘á» (tÃ¹y chá»n) hoáº·c Ä‘á»ƒ trá»‘ng Ä‘á»ƒ AI chá»n má»™t chá»§ Ä‘á». Chá»n cÃ¡c tÃ¹y chá»n bÃªn dÆ°á»›i Ä‘á»ƒ tÃ¹y chá»‰nh bÃ i kiá»ƒm tra Ä‘á»c cá»§a báº¡n.',
            'AI will automatically generate a reading passage and multiple-choice questions. Example topics: "Climate Change", "Space Exploration", "Vietnamese Culture"...': 'AI sáº½ tá»± Ä‘á»™ng táº¡o má»™t Ä‘oáº¡n vÄƒn Ä‘á»c vÃ  cÃ¡c cÃ¢u há»i tráº¯c nghiá»‡m. VÃ­ dá»¥ cÃ¡c chá»§ Ä‘á»: "Biáº¿n Ä‘á»•i KhÃ­ háº­u", "KhÃ¡m phÃ¡ KhÃ´ng gian", "VÄƒn hÃ³a Viá»‡t Nam"...',
            //Adding 
            'Questions': 'Sá»‘ cÃ¢u há»i',
            'Learners': 'Sá»‘ ngÆ°á»i há»c',
            'Explore Multiple Choice Tests': 'KhÃ¡m phÃ¡ bÃ i tráº¯c nghiá»‡m Ä‘á»c hiá»ƒu',
            'All multiple choice tests shown here are public and can be taken without signing in, but your scores and progress will not be saved.': 'Táº¥t cáº£ cÃ¡c bá»™ bÃ i tráº¯c nghiá»‡m hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y lÃ  cÃ´ng khai vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c há»c mÃ  khÃ´ng cáº§n Ä‘Äƒng nháº­p, nhÆ°ng thá»i gian há»c, tiáº¿n Ä‘á»™ vÃ  chuá»—i ngÃ y há»c cá»§a báº¡n sáº½ khÃ´ng Ä‘Æ°á»£c lÆ°u láº¡i.',
            'Take Test': 'Há»c ngay',
            'Explore Writing Exercises': 'KhÃ¡m phÃ¡ bÃ i viáº¿t',
            'All writing exercises shown here are public and can be practiced without signing in, but your progress will not be saved.': 'Táº¥t cáº£ cÃ¡c bá»™ bÃ i viáº¿t hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y lÃ  cÃ´ng khai vÃ  cÃ³ thá»ƒ Ä‘Æ°á»£c há»c mÃ  khÃ´ng cáº§n Ä‘Äƒng nháº­p, nhÆ°ng thá»i gian há»c, tiáº¿n Ä‘á»™ vÃ  chuá»—i ngÃ y há»c cá»§a báº¡n sáº½ khÃ´ng Ä‘Æ°á»£c lÆ°u láº¡i.',
            'Active Users': 'NgÆ°á»i dÃ¹ng hoáº¡t Ä‘á»™ng',
            'Flashcards Created': 'Tháº» ghi nhá»› Ä‘Æ°á»£c táº¡o',
            'Success Rate': 'Tá»· lá»‡ thÃ nh cÃ´ng',
            'Popular Flashcard Sets': 'CÃ¡c Bá»™ Tháº» Ghi Nhá»› Phá»• Biáº¿n',
            'Explore All': 'KhÃ¡m phÃ¡ ngay',
            'Sign Up to Study': 'ÄÄƒng kÃ½ há»c ngay!',
            'Featured': 'Ná»•i Báº­t',
            'Start your language journey today!': 'Quáº©y banh nÃ³c ngoáº¡i ngá»¯ ngay vÃ  luÃ´n!',
            'Join thousands of successful language learners. Create your account to access personalized learning features.': 'Tham gia cÃ¹ng hÃ ng ngÃ n â€œchiáº¿n tháº§n ngoáº¡i ngá»¯â€! Táº¡o tÃ i khoáº£n Ä‘á»ƒ khÃ¡m phÃ¡ tráº£i nghiá»‡m há»c cÃ¡ nhÃ¢n hÃ³a siÃªu mÆ°á»£t!',
            'AI-Powered Learning': 'Há»c vá»›i AI â€“ Cá»© Ä‘á»ƒ mÃ¡y lo!',
            'Personalized to match your learning style': 'PhÃ¹ há»£p vá»›i phong cÃ¡ch há»c cá»§a chÃ­nh báº¡n â€“ khÃ´ng Ä‘á»¥ng hÃ ng ai luÃ´n!',
            'Smart Flashcards': 'Flashcard "xá»‹n" cÃ³ chá»n lá»c',
            'Enhanced with spaced repetition technology': 'Láº·p Ä‘i láº·p láº¡i Ä‘Ãºng lÃºc, nhá»› hoÃ i khÃ´ng quÃªn â€“ há»c lÃ  dÃ­nh!',
            'Track Your Progress': 'Theo dÃµi tiáº¿n Ä‘á»™ â€“ NhÃ¬n lÃ  muá»‘n há»c tiáº¿p!',
            'Visual statistics to keep you motivated': 'Biá»ƒu Ä‘á»“ Ä‘áº¹p nhÆ° crush, xem lÃ  cÃ³ Ä‘á»™ng lá»±c liá»n!',
            'Create Your Account': 'Láº­p "nick" xá»‹n, chiáº¿n thÃ´i!',
            'It\'s quick and easy!': 'VÃ i ná»‘t nháº¡c lÃ  xong!',
            'Continue': 'Tiáº¿p tá»¥c nÃ ',
            'Already have an account?': 'Chiá»…n sÄ© cÃ³ tÃ i khoáº£n rá»“i háº£? ÄÄƒng nháº­p chiáº¿n thÃ´i ðŸ‘‰' ,
            'Create Account': 'Chiáº¿n thÃ´iiii',
            'Welcome back to your language journey!': 'Má»«ng báº¡n quay láº¡i "Ä‘Æ°á»ng Ä‘ua" ngoáº¡i ngá»¯!',
            'Log in to continue your progress, practice vocabulary, and achieve your language goals.': 'ÄÄƒng nháº­p Ä‘á»ƒ tiáº¿p tá»¥c tiáº¿n Ä‘á»™, luyá»‡n tá»« vá»±ng vÃ  Ä‘áº¡t má»¥c tiÃªu ngÃ´n ngá»¯ cá»§a báº¡n.',
            'Keep your learning momentum going': 'Giá»¯ "lá»­a" há»c táº­p má»—i ngÃ y.',
            'Track your progress and earn rewards': 'Theo dÃµi tiáº¿n Ä‘á»™ vÃ  nháº­n thÆ°á»Ÿng.',
            'Continue right where you left off': 'Tiáº¿p tá»¥c ngay chá»— báº¡n dá»«ng láº¡i.',
            'Today': 'HÃ´m nay',
            'Explore Public Flashcards': 'KhÃ¡m phÃ¡ Tháº» Ghi Nhá»› CÃ´ng Khai',
            'Discover flashcard sets created by other users to expand your vocabulary.': 'KhÃ¡m phÃ¡ cÃ¡c bá»™ tháº» ghi nhá»› do ngÆ°á»i dÃ¹ng khÃ¡c táº¡o Ä‘á»ƒ má»Ÿ rá»™ng vá»‘n tá»« vá»±ng cá»§a báº¡n.',
            'Browse Public Flashcards': 'KhÃ¡m phÃ¡ ngay!',
            'Create AI Reading Test':'Táº¡o bÃ i kiá»ƒm tra báº±ng AI',
            'Enter a topic (optional) or leave blank for AI to choose one. Select options below to customize your reading test. AI will automatically generate a reading passage and multiple-choice questions. Example topics: "Climate Change", "Space Exploration", "Vietnamese Culture"...': 'Nháº­p chá»§ Ä‘á» (tÃ¹y chá»n) hoáº·c bá» trá»‘ng Ä‘á»ƒ AI tá»± chá»n "mÃ³n". TÃ¹y chá»‰nh bÃ i Ä‘á»c hiá»ƒu bÃªn dÆ°á»›i theo Ã½ báº¡n. AI sáº½ tá»± táº¡o Ä‘oáº¡n vÄƒn vÃ  cÃ¢u há»i tráº¯c nghiá»‡m. VÃ­ dá»¥ chá»§ Ä‘á»: "Biáº¿n Ä‘á»•i khÃ­ háº­u", "KhÃ¡m phÃ¡ vÅ© trá»¥", "VÄƒn hÃ³a Viá»‡t Nam"... ',
            'Improve your writing skills through specially designed writing exercises.': 'NÃ¢ng cao ká»¹ nÄƒng viáº¿t cá»§a báº¡n qua cÃ¡c bÃ i táº­p Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘áº·c biá»‡t. ',
            'Generate Writing Topic with AI':'Táº¡o Chá»§ Äá» Viáº¿t báº±ng AI ',
            'How it works': 'CÃ¡ch hoáº¡t Ä‘á»™ng',
            'AI will automatically generate a writing topic based on your learning language and native language. This feature requires that you have saved your Gemini API key.': 'AI sáº½ tá»± Ä‘á»™ng táº¡o chá»§ Ä‘á» viáº¿t dá»±a trÃªn ngÃ´n ngá»¯ há»c vÃ  ngÃ´n ngá»¯ máº¹ Ä‘áº» cá»§a báº¡n. TÃ­nh nÄƒng nÃ y yÃªu cáº§u báº¡n Ä‘Ã£ lÆ°u khÃ³a API Gemini.',
            'Topic Title': 'TÃªn Topic',
            'Enter a title for your writing topic': 'Nháº­p tiÃªu Ä‘á» cho chá»§ Ä‘á» viáº¿t cá»§a báº¡n',
            'Learning Language': 'NgÃ´n ngá»¯ há»c',
            'Native Language': 'Tiáº¿ng "máº¹ Ä‘áº»"',
            'Generate Topic': 'Táº¡o Chá»§ Äá»',
            'Minutes': 'PhÃºt',
            'minutes': 'phÃºt',
            'Hours': 'Giá»'
        }
    }), []);

    // Simple translation function - returns static translation if available
    const translateText = useCallback((text) => {
        if (!text) return '';
        
        // If not English and we have a translation, use it
        if (currentLanguage !== 'en' && 
            staticTranslations[currentLanguage] && 
            staticTranslations[currentLanguage][text]) {
            return staticTranslations[currentLanguage][text];
        }
        
        // Otherwise return original text
        return text;
    }, [currentLanguage, staticTranslations]);

    // Change language and save to localStorage
    const changeLanguage = useCallback((langCode) => {
        if (langCode && languages.some(lang => lang.code === langCode)) {
            setCurrentLanguage(langCode);
            localStorage.setItem('selectedLanguage', langCode);
        }
    }, [languages]);

    // Memoize context value to prevent unnecessary re-renders
    const contextValue = useMemo(() => ({
        currentLanguage,
        languages,
        translateText,
        changeLanguage
    }), [currentLanguage, languages, translateText, changeLanguage]);

    return (
        <LanguageContext.Provider value={contextValue}>
            {children}
        </LanguageContext.Provider>
    );
};

export const useLanguage = () => {
    const context = useContext(LanguageContext);
    if (!context) {
        throw new Error('useLanguage must be used within a LanguageProvider');
    }
    return context;
};

export default LanguageContext; 